// prisma/product.prisma

model Product {
  id          String            @id @default(uuid())
  title       String
  isDeleted   Boolean           @default(false)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  metadata    Json?

  // Relations
  variants    ProductVariant[]
  orderItems  OrderItem[]       @relation("ProductOrderItems")
}

model ProductVariant {
  id          String      @id @default(uuid())
  productId   String
  color       String
  colorCode   String?
  size        Size
  img         String
  price       Float
  stock       Int          @default(0)
  isDeleted   Boolean      @default(false)
  metadata    Json?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  // Relations
  product     Product      @relation(fields: [productId], references: [id])
  orderItems  OrderItem[]  @relation("VariantOrderItems")

  @@unique([productId, color, size])
}
